<div class="roles-container">
  <div class="roles-header">
    <h1>ADMINISTRACI칍N DE PERFIL</h1>
    <p>Gestiona los perfiles de usuario y sus permisos de m칩dulos</p>
  </div>

  <!-- Formulario de nuevo perfil -->
  <div class="nuevo-rol-section">
    <div class="form-header">
      <h2>Gesti칩n de Perfil</h2>
      <div class="user-icon">游논</div>
    </div>
    
    <form class="rol-form" (ngSubmit)="crearRol()">
      <div class="form-grid">
        <div class="form-group">
          <label for="nombre">Nombre del perfil:</label>
          <input 
            type="text" 
            id="nombre" 
            [(ngModel)]="nuevoRol.nombre" 
            name="nombre"
            placeholder="Ej: ADMINISTRADOR, VENDEDOR, FACTURADOR"
            required
          >
        </div>
      </div>

      <!-- Secci칩n de permisos -->
      <div class="permisos-section">
        <div class="permisos-grid">
          <div 
            *ngFor="let permiso of permisosDisponibles" 
            class="permiso-checkbox-item"
          >
            <label class="permiso-checkbox">
              <input 
                type="checkbox" 
                [checked]="getPermisoValue(permiso.id)"
                (change)="setPermisoValue(permiso.id, $event.target.checked)"
                name="permiso_{{permiso.id}}"
              >
              <span class="checkmark"></span>
              <span class="checkbox-text">{{permiso.nombre}}</span>
            </label>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-nuevo">Nuevo</button>
        <button type="submit" class="btn-registrar">Registrar</button>
        <button type="button" class="btn-actualizar">Actualizar</button>
        <button type="button" class="btn-eliminar">Eliminar</button>
      </div>
    </form>
  </div>

  <!-- Tabla de perfiles y permisos -->
  <div class="roles-lista-section">
    <div class="tabla-container">
      <table class="tabla-roles">
        <thead>
          <tr>
            <th>PERFIL</th>
            <th *ngFor="let permiso of permisosDisponibles">{{permiso.nombre.toUpperCase().replace('M칍DULO ', '')}}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let rol of roles" [class.selected]="rol.id === 1">
            <td class="perfil-nombre">
              <strong>{{rol.nombre}}</strong>
            </td>
            <td *ngFor="let permiso of permisosDisponibles" class="permiso-cell">
              <span class="permiso-indicator" 
                    [class.ok]="tienePermiso(rol, permiso.id)"
                    [class.no]="!tienePermiso(rol, permiso.id)">
                {{tienePermiso(rol, permiso.id) ? 'OK' : '--'}}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
